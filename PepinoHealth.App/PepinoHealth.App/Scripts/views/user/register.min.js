function bindControlsOnLoadInLogin(){validateNLogin();hideModal("loader")}function validateNLogin(){$("#formLogin").bootstrapValidator({live:liveType.Disabled,fields:{txtUsername:{validators:{notEmpty:{message:"Required."}}},txtPassword:{validators:{notEmpty:{message:"Required."},callback:{callback:function(n){let t=null;return n.length>0?(t=validateUser(),{valid:t,message:"The Username/Password combination is not valid. Try again."}):!0}}}}}}).on("success.form.bv",function(n){n.preventDefault();validateUserNNavigate()})}function validateUser(){var t=JSON.stringify({Username:$("#txtUsername").val().toLowerCase().trim(),Password:$("#txtPassword").val()}),n=!1;return callAPI(validateUserUrl,apiType.Post,asyncType.False,cacheType.False,t,dataNature.Json,function(t){n=validUser=t.Valid}),n}function validateUserNNavigate(){let n=validUser?validUser:validateUser();n&&(showModal("loader"),readUserInfoNNavigate())}function readUserInfoNNavigate(){let n=JSON.stringify({Username:$("#txtUsername").val().toLowerCase().trim()}),t=quickLinksUrl;grantAccess(n,t)}function grantAccess(n,t){callAPI(grantAccessUrl,apiType.Post,asyncType.True,cacheType.False,n,dataNature.Json,function(n){n&&(window.location.href=t)})}function bindControlsOnLoadInDashboard(){bindAppointmentChart();hideModal("loader")}function bindAppointmentChart(){let t=[{Month:"Jan 22",NoOfAppointments:5,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0},{Month:"Feb 22",NoOfAppointments:4,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0},{Month:"Mar 22",NoOfAppointments:3,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0},{Month:"Apr 22",NoOfAppointments:10,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0},{Month:"May 22",NoOfAppointments:2,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0},{Month:"Jun 22",NoOfAppointments:8,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0},{Month:"Jun 22",NoOfAppointments:6,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0},{Month:"Aug 22",NoOfAppointments:7,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0},{Month:"Sep 22",NoOfAppointments:4,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0},{Month:"Oct 22",NoOfAppointments:1,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0},{Month:"Nov 22",NoOfAppointments:3,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0},{Month:"Dec 22",NoOfAppointments:9,NoOfCheckedIn:0,NoOfNotCheckedIn:0,NoOfCancelled:0}];Chart.defaults.global.defaultFontFamily="HindSiliguri";var e=Enumerable.From(t).Select(function(n){return n.Month}).ToArray(),o=Enumerable.From(t).Select(function(n){return n.NoOfAppointments}).ToArray(),i=document.getElementById("cnsGraph").getContext("2d"),r=null,n=null,s=null,u=null,f=$(".p-body-content")[0].clientWidth-20;$("#cnsGraph").css("width",f);r={responsive:!0,maintainAspectRatio:!0,tooltips:{enabled:!0,mode:"single",custom:function(n){n&&(n.displayColors=!1)},callbacks:{title:function(n,t){return moment(t.labels[n[0].index],"MMM YY").format("MMMM YYYY")},label:function(n){var r=Enumerable.From(t).Where(function(t){return t.Month==n.xLabel}).ToArray()[0],i="";return i=["Total Appointments: "+r.NoOfAppointments],i.push("Checked In Appointments: "+r.NoOfCheckedIn),i.push("Not Checked In Appointments: "+r.NoOfNotCheckedIn),i.push("Cancelled Appointments: "+r.NoOfCancelled),i}},backgroundColor:setRGBA(.65)},legend:{display:!1},scales:{yAxes:[{ticks:{min:0,fontSize:14}}],xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{min:0,fontSize:14}}]},elements:{point:{pointStyle:"circle"}}};n=i.createLinearGradient(0,0,0,400);n.addColorStop(0,setRGBA(.5));n.addColorStop(1,setRGBA(0));u=[{lineThickness:1,data:o,label:"",fill:!0,lineTension:.4,borderWidth:1,backgroundColor:n,borderColor:setRGBA(1),borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"round",pointBorderColor:setRGBA(1),pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:7,pointHoverBackgroundColor:setRGBA(1),pointHoverBorderColor:setRGBA(1),pointHoverBorderWidth:1,pointRadius:5,pointHitRadius:5,spanGaps:!1,showLine:!0}];s=new Chart(i,{type:"line",data:{labels:e,datasets:u},options:r});$("#cnsGraph").css("width",f)}function addOPRegistrationDetails(){$.ajax({type:"POST",url:'@Url.Action("CRUDOPRegistrationDetails", "OutPatient")',data:JSON.stringify({OP_NO:$("#txtOPNo").val(),OP_DATE:$("#txtDate").val(),UHID:$("#txtUHID").val(),OP_PREPARED_BY:"Admin",OP_PRINT_COUNT:"",OP_YEAR:$("#txtYear").val(),OP_TIME:$("#txtTime").val(),OP_MODIFIED_BY:"Admin",NAME_SUR:$("#ddlNameTitle").val(),OP_NAME:$("#txtName").val(),OP_FATHER_NAME:$("#txtFatherName").val(),OP_HUSBAND:$("#txtHusbandName").val(),OP_AddRESS:$("#txtAddress").val(),OP_PLACE:"",OP_PHONE_NUM:$("#txtPhoneNo").val(),OP_RELIGION:"",OP_SUBCAST:"",OP_CATEGORY:$("#ddlCategory").val(),OP_GENDER:$("#ddlGender").val(),OP_DEPT_NAME:$("#ddlDepartment").val(),OP_UNIT_NO:"",OP_DOB:"",OP_AGE:$("#ddlAge").val(),OP_AGE1:$("#ddlYear").val(),OP_ROOM_NO:"",OP_OCCUPATION:"",OP_INCOME:"",OP_FEES:$("#txtCharge").val(),OP_REF_DOCTOR:$("#ddlRefDoctor").val(),OP_MARRRIED:$("#ddlMaritalStatus").val(),OP_COPERATE:"",DUMMYYN:"",OP_MONTH:"",LABYN:"",RAD_AGE:"",CARD_NUMBER:"",ALT_PHNO:$("#txtAlternatePhoneNo").val(),Token_No:$("#txtTokenNo").val(),ConsultantDR:$("#ddlConsultantDoctor").val(),Location:"",Barcode_No:"",Barcode_Image:"",MailID:"",AadhaarID:$("#txtAadhaarID").val(),OPID:"",COMPLAINTS:"",ONEXAMINATIONS:"",ADVICE:"",PatientType:$("#ddlPatientType").val(),MODE:"SAVE"}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){n!=null&&(n[0].Result==!0?(showSuccessAlert("Successfully Inserted!"),clearAll(),bindCRUDDepotMasterDetails()):showErrorAlert("This record is already exist "))}})}function bindCRUDOPDetails(){if($("#OPDetailsModal").modal("show"),showModal("loader"),$("#txtStartDate").val()==""||$("#txtEndDate").val()==""){showErrorAlert("no date selected");return}if(Date.parse($("#txtStartDate").val())>Date.parse($("#txtEndDate").val())){showErrorAlert("startdate shouldn't be greater than enddate");return}var n=JSON.stringify({StartDate:$("#txtStartDate").val(),EndDate:$("#txtEndDate").val()});$.ajax({type:"POST",url:'@Url.Action("CRUDOutPatientDetails", "OutPatient")',data:n,contentType:"application/json; charset=utf-8",dataType:"json",dataFilter:function(n){var t=jQuery.parseJSON(n);return t.recordsTotal=t.total,t.recordsFiltered=t.total,t.data=t.list,JSON.stringify(t)},success:function(n){if($.fn.DataTable.isDataTable("#tblOPDetails")&&$("#tblOPDetails").DataTable().destroy(),$("#tblOPDetails tbody").empty(),n!=null){$.each(n,function(n,t){var i='<tr><td><a href="#" id="'+t.UHID+'" onclick=getOPDetailsByUHID(this)>'+t.UHID+"<\/a><\/td><td>"+t.OP_NAME+"<\/td><td>"+t.OP_DEPT_NAME+"<\/td><td>"+t.OP_GENDER+"<\/td><td>"+t.OP_AGE+"<\/td><\/tr>";$("#tblOPDetails tbody").append(i)});var t=$("#tblOPDetails").DataTable({scrollX:!0,autoWidth:!1,select:!0,dom:"Bfrtip",pagingType:"full_numbers",buttons:["pageLength",{extend:"excelHtml5",text:'<li class="fa fa-file-excel-o fa-lg fa_excel" aria-hidden="true" style="color:#f04124">  <\/li> Excel  ',titleAttr:"Excel",exportOptions:{columns:":visible"}}]});hideModal("loader")}}})}function modalOutPatientPopup(){getDate();bindCRUDOPDetails()}function getOPDetailsByUHID(n){var t=n.id;$.ajax({type:"POST",url:'@Url.Action("GetOPDetailsByUHID", "OutPatient")',data:JSON.stringify({UHID:t}),contentType:"application/json; charset=utf-8",dataType:"json",async:!1,success:function(n){if(n!="")$("#OPDetailsModal").modal("hide"),$.each(n,function(n,t){$("#txtOPNo").val(t.OP_NO);$("#txtUHID").val(t.UHID);$("#txtYear").val(t.OP_YEAR);$("#ddlNameTitle").val(t.NAME_SUR);$("#txtName").val(t.OP_NAME);$("#txtFatherName").val(t.OP_FATHER_NAME);$("#txtHusbandName").val(t.OP_HUSBAND);$("#txtAddress").val(t.OP_AddRESS);$("#txtPhoneNo").val(t.OP_PHONE_NUM);$("#ddlCategory").val(t.OP_CATEGORY);$("#ddlGender").val(t.OP_GENDER);$("#ddlDepartment").val(t.OP_DEPT_NAME);$("#ddlAge").val(t.OP_AGE);$("#txtCharge").val(t.OP_FEES);$("#ddlRefDoctor").val(t.OP_REF_DOCTOR);$("#ddlMaritalStatus").val(t.OP_MARRRIED);$("#txtAlternatePhoneNo").val(t.ALT_PHNO);$("#txtTokenNo").val(t.Token_No);$("#ddlConsultantDoctor").val(t.ConsultantDR);$("#txtAadhaarID").val(t.AadhaarID);$("#ddlPatientType").val(t.PatientType);$("#barcodeImg").attr("src","data:image/png;base64,"+t.BarcodeImage)});else{showErrorAlert("no date found..!");return}}})}function bindGetDepartmentDetails(){$.ajax({type:"POST",url:'@Url.Action("CRUDDepotMasterDetails", "Admin")',data:JSON.stringify({DeptCode:"",DeptName:"",DeptNoBed:0,Flag:"read"}),contentType:"application/json; charset=utf-8",dataType:"json",async:!1,success:function(n){n!=!1&&$.each(n,function(t){$("#ddlDepartment").append($("<option><\/option>").val(n[t].DeptName).html(n[t].DeptName))})}})}function getDate(){var n=new Date,t=n.getFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"-"+("0"+n.getDate()).slice(-2);$("#txtStartDate").val(t);$("#txtEndDate").val(t);$("#txtDate").val(t)}function bindgenerateBarcode(){$.ajax({type:"POST",url:'@Url.Action("generateBarcode", "OutPatient")',data:"{}",contentType:"application/json; charset=utf-8",dataType:"json",async:!1,success:function(n){$("#barcodeImg").attr("src","data:image/png;base64,"+n)}})}var validateUserUrl=null,grantAccessUrl=null,quickLinksUrl=null,validUser=null;